<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Вход / Регистрация</title>
<style>
:root{
--container-width:1200px;--accent:#2B7A78;--accent-light:#4CAF50;--accent-orange:#FF9800;
--bg-gradient:linear-gradient(135deg,#f9f9f7 0%,#e8f5e9 100%);
--text-dark:#2c3e50;--text-light:#666;--white:#fff;--shadow:0 2px 20px rgba(0,0,0,0.1);--shadow-hover:0 10px 40px rgba(0,0,0,0.15);
}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;}
body{font-family:'Arial',sans-serif;display:flex;flex-direction:column;min-height:100vh;background:var(--bg-gradient);color:var(--text-dark);}
.container{max-width:var(--container-width);margin:0 auto;padding:1rem;}
header{position:fixed;top:0;left:0;width:100%;background:rgba(255,255,255,0.95);backdrop-filter:blur(10px);padding:1rem 0;z-index:1000;box-shadow:var(--shadow);}
nav{display:flex;justify-content:center;gap:2rem;}
nav a{text-decoration:none;color:var(--text-dark);font-weight:500;padding:0.5rem 1.5rem;border-radius:25px;transition:0.3s;}
nav a:hover{color:var(--accent-light);background:rgba(76,175,80,0.1);}
nav a.active{background:var(--accent-light);color:var(--white);}
main{flex:1;padding:140px 0 2rem;display:flex;flex-direction:column;align-items:center;}
h1{text-align:center;font-size:2.5rem;background:linear-gradient(135deg,var(--accent-light) 0%,var(--accent) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin-bottom:30px;}
.card{background:var(--white);border-radius:12px;padding:1.5rem;box-shadow:0 2px 8px rgba(0,0,0,.08);transition:0.3s;width:350px;margin-bottom:20px;}
.card:hover{box-shadow:var(--shadow-hover);transform:translateY(-2px);}
input{width:100%;padding:0.5rem;margin-top:0.3rem;margin-bottom:1rem;border-radius:6px;border:1px solid #ccc;}
button,.btn{background:var(--accent-light);color:#fff;border:none;padding:0.75rem 1.5rem;border-radius:8px;cursor:pointer;font-weight:500;width:100%;transition:0.3s;}
button:hover{opacity:0.9;transform:translateY(-1px);}
.toggle-btns{display:flex;justify-content:center;gap:1rem;margin-bottom:30px;}
.toggle-btns button{width:150px;}
.hidden{display:none;}
footer{text-align:center;padding:2rem 0;color:var(--text-light);margin-top:auto;}
</style>
</head>
<body>
<header>
<nav>
<a href="index.html" class="nav-link">Главная</a>
<a href="features.html" class="nav-link">Функции</a>

<a href="auth.html" id="auth-link" class="nav-link active">Войти</a>
<a href="profile.html" id="profile-link" class="nav-link" style="display:none;">Профиль</a>
     <a href="cart.html" id="cart-link">Корзина (0)</a>
</nav>
</header>

<main class="container">
<h1>Авторизация</h1>

<div class="toggle-btns">
<button onclick="showLogin()">Войти</button>
<button onclick="showRegister()">Регистрация</button>
</div>

<!-- Форма Входа -->
<div class="card" id="loginForm">
<h3>Вход</h3>
<input type="email" id="loginEmail" placeholder="Email" required>
<input type="password" id="loginPassword" placeholder="Пароль" required>
<button onclick="login()">Войти</button>
</div>

<!-- Форма Регистрации -->
<div class="card hidden" id="registerForm">
<h3>Регистрация</h3>
<input type="text" id="regName" placeholder="Имя" required>
<input type="email" id="regEmail" placeholder="Email" required>
<input type="password" id="regPassword" placeholder="Пароль" required>
<button onclick="register()">Зарегистрироваться</button>
</div>

</main>

<footer class="container">
<p>© 2025 Полезные снеки</p>
</footer>

<script>
const authLink = document.getElementById("auth-link");
const profileLink = document.getElementById("profile-link");
const currentUser = localStorage.getItem("currentUser");
if(currentUser){ authLink.style.display="none"; profileLink.style.display="inline-block"; }

// Переключение форм
function showLogin(){
document.getElementById("loginForm").classList.remove("hidden");
document.getElementById("registerForm").classList.add("hidden");
}
function showRegister(){
document.getElementById("registerForm").classList.remove("hidden");
document.getElementById("loginForm").classList.add("hidden");
}

// Регистрация
function register(){
let name=document.getElementById("regName").value;
let email=document.getElementById("regEmail").value;
let password=document.getElementById("regPassword").value;
if(!name||!email||!password){ alert("Заполните все поля!"); return; }
let users=JSON.parse(localStorage.getItem("users")||"[]");
if(users.find(u=>u.email===email)){ alert("Пользователь уже существует!"); return; }
users.push({name,email,password});
localStorage.setItem("users",JSON.stringify(users));
alert("Регистрация успешна! Теперь войдите.");
document.getElementById("regName").value="";
document.getElementById("regEmail").value="";
document.getElementById("regPassword").value="";
showLogin();
}

// Вход
function login(){
let email=document.getElementById("loginEmail").value;
let password=document.getElementById("loginPassword").value;
let users=JSON.parse(localStorage.getItem("users")||"[]");
let user=users.find(u=>u.email===email&&u.password===password);
if(user){ localStorage.setItem("currentUser",JSON.stringify(user)); alert("Вход успешен!"); window.location.href="profile.html"; }
else{ alert("Неверный email или пароль!"); }
}
function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem("cart") || "[]");
  const totalQty = cart.reduce((s,i)=>s+i.qty,0);
  const cartLink = document.getElementById("cart-link");
  if(cartLink) cartLink.textContent = `Корзина (${totalQty})`;
}
updateCartCount();

</script>
</body>
</html>
